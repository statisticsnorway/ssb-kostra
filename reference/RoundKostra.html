<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rounding à la Heldal following the standards in the Kostra project. — RoundKostra • Kostra</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rounding à la Heldal following the standards in the Kostra project. — RoundKostra"><meta name="description" content="Rounding à la Heldal following the standards in the Kostra project."><meta property="og:description" content="Rounding à la Heldal following the standards in the Kostra project."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Kostra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Rounding à la Heldal following the standards in the Kostra project.</h1>

      <div class="d-none name"><code>RoundKostra.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Rounding à la Heldal following the standards in the Kostra project.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">RoundKostra</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">idVar</span>,</span>
<span>  strataVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">freqVar</span>,</span>
<span>  freqVarGroup <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roundBase <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"pls"</span>,</span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  allSmall <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  singleTotal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  makeSums <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"rounded"</span>,</span>
<span>  total <span class="op">=</span> <span class="st">"Total"</span>,</span>
<span>  split <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  extraOutput <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">12345</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data set of class data.frame</p></dd>


<dt id="arg-idvar">idVar<a class="anchor" aria-label="anchor" href="#arg-idvar"></a></dt>
<dd><p>Id-variable (name or number)</p></dd>


<dt id="arg-stratavar">strataVar<a class="anchor" aria-label="anchor" href="#arg-stratavar"></a></dt>
<dd><p>Strata-variable(s) (name or number)</p></dd>


<dt id="arg-freqvar">freqVar<a class="anchor" aria-label="anchor" href="#arg-freqvar"></a></dt>
<dd><p>Variable(s) holding counts (name or number)</p></dd>


<dt id="arg-freqvargroup">freqVarGroup<a class="anchor" aria-label="anchor" href="#arg-freqvargroup"></a></dt>
<dd><p>NULL (default) or integer representing groups of variables (see details)</p></dd>


<dt id="arg-roundbase">roundBase<a class="anchor" aria-label="anchor" href="#arg-roundbase"></a></dt>
<dd><p>Basis for rounding</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Algorithm for the rounding calculations. Currently "pls" or "singleRandom".</p></dd>


<dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>Model formula as a string defining cells to be published (additional to automation)</p></dd>


<dt id="arg-level">level<a class="anchor" aria-label="anchor" href="#arg-level"></a></dt>
<dd><p>Interaction level or 0 (all levels) defining complexity of model component created from strata</p></dd>


<dt id="arg-allsmall">allSmall<a class="anchor" aria-label="anchor" href="#arg-allsmall"></a></dt>
<dd><p>When TRUE all small values will be rounded (when a single freqVar)</p></dd>


<dt id="arg-singletotal">singleTotal<a class="anchor" aria-label="anchor" href="#arg-singletotal"></a></dt>
<dd><p>When TRUE identical rowsums in all freqVarGroups needed.
When FALSE totals for each freqVarGroup will be in output.</p></dd>


<dt id="arg-makesums">makeSums<a class="anchor" aria-label="anchor" href="#arg-makesums"></a></dt>
<dd><p>When TRUE totals vil be made similar to ProtectKostra (in fact this is done by calling ProtectKostra)</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>One of "rounded" (default), "original", "difference" or "status".
Unrounded results are returned by “original” (same as roundBase=0) and
<code>"difference" = "rounded" -  “original”</code>.
With output=”status” zero differences are set to “o” (original) and others are coded as “r” (rounded)</p></dd>


<dt id="arg-total">total<a class="anchor" aria-label="anchor" href="#arg-total"></a></dt>
<dd><p>String used to name totals.</p></dd>


<dt id="arg-split">split<a class="anchor" aria-label="anchor" href="#arg-split"></a></dt>
<dd><p>Parameter to <code>AutoSplit</code> - see varNames and rowData above.
When NULL automatic splitting without needing a split string.</p></dd>


<dt id="arg-extraoutput">extraOutput<a class="anchor" aria-label="anchor" href="#arg-extraoutput"></a></dt>
<dd><p>When TRUE output is a list of several elements (makeSums ignored)</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>NULL or seed for random number generator  (<code>set.seed(seed)</code> will be run at the beginning of the function)</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Variables for formula and additional variables that will be included in output (name or number).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.frame unless extraOutput = TRUE</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>A single freq variable and formula:</strong>
  A formula defines all the publishable cells. Rounding is performed so that all the publishable cells are safe.
  When allSmall=TRUE all small cells are rounded. All possible totals are then safe, but totals not defined by
  the formula can be far from the original values.</p>
<p><strong>A single freq variable and strata:</strong>
  Instead of a formula it is assumed that the cells to be published are obtained by crossing all strata variables.
  The parameter "level" may be used.</p>
<p><strong>Several freq variables without freqVarGroup:</strong>
  The data is in a unstacked form and stack/unstack will be performed in the background similar to ProtectKostra.
  The original id-var will be considered as a strata-var when stacked and rounding is performed similar
  to "A single freq variable and strata".</p>
<p><strong>With freqVarGroup without single-groups:</strong>
  Each group can be stacked to form a separate data set, but a common data set is needed.
  An ad hoc data set is created to match all the single data sets and this data set will be used in the rounding process.
  This method will not work in complicated cases. Use with care.
  Try extraOutput=TRUE to see what is going on.</p>
<p><strong>With freqVarGroup with single-groups:</strong>
  The single-groups are assumed to be two-category groups (yes and no, but only yes is reported).
  The remaining category will be computed in order to create ad hoc data set.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Even if freq-variables with <code>freqVarGroup&lt;1</code> is not used they will be read by <code><a href="GetData.html">GetData</a></code>  together with the other
the freq-variables variables into a matrix. Use a common numeric type for all these variables to prevent change of data type.</p>

<p>Parameter <code>namesAsInput</code> in ProtectTable() is not yet available in RoundKostra and therefore very advanced variable name
coding will give insufficient results. Example:</p>

<p><code>RoundKostra(KostraData("z3wb") ,idVar="region",strataVar=c("fylke","kostragr"),freqVar=4:15)</code></p>
<p>But this will work:</p>
<p><code>RoundKostra(KostraData("z3wb") ,idVar="region",strataVar=c("fylke","kostragr"),freqVar=4:15,split=NULL)</code></p>
<p>See similar example in <code><a href="ProtectTable.html">ProtectTable</a></code>.</p>
<p><strong>NOTE:</strong> Be sure to spell the input parameters correctly. Because of the "..."-input misspelled parameters
may give strange results instead of error.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ProtectKostra.html">ProtectKostra</a></code>, <code>RoundViaDummy</code>, <code>makeroundtabs</code>,
<code>Round2</code>, <code>FormulaSums</code>, <code>ModelMatrix</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ========================================================</span></span></span>
<span class="r-in"><span> <span class="co">#    Examples:  A single freq variable</span></span></span>
<span class="r-in"><span> <span class="co"># =======================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="va">z2w</span> <span class="op">&lt;-</span> <span class="fu"><a href="KostraData.html">KostraData</a></span><span class="op">(</span><span class="st">"z2w"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ==== Without strataVar and  without formula ====</span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, roundBase<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  Total     52</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, makeSums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co"># Without total</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ==== With strataVar and  without formula ====</span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>, roundBase<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   0100     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   0400      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   0500      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   0600     23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   0800     10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   1000      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     03     52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     04      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  Total     52</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>, makeSums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region fylke kostragr arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100  0100       03     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200  0400       03      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300  0500       03      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400  0500       03      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900  0600       03     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000  0600       03      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300  0800       03      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400  0800       03      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100  0100       04      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100  1000       04      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700  1000       04      3</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, strataVar<span class="op">=</span> <span class="st">"fylke"</span>, allSmall<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co"># Warning when makeSums=TRUE</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Since allSmall=FALSE all output is not safe</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   0100     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   0400      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   0500     10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   0600     23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   0800      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   1000      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18  Total     54</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, strataVar<span class="op">=</span> <span class="st">"fylke"</span>, allSmall<span class="op">=</span><span class="cn">FALSE</span>, makeSums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region fylke arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100  0100     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200  0400      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300  0500      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400  0500      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900  0600     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000  0600      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300  0800      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400  0800      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100  0100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100  1000      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700  1000      3</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>, extraOutput<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">formula</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~ region + fylke + kostragr"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ==== Without strataVar and  with formula ( makeSums ignored without warning)  ====</span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, formula<span class="op">=</span><span class="st">"fylke"</span>, fylke<span class="op">=</span><span class="st">"fylke"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid fylke</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11  0100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0  0400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8  0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      3  0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14  0600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9  0600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      4  0800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      3  0800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0  0100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0  1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      3  1000</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, formula<span class="op">=</span><span class="st">"fylke"</span>, fylke<span class="op">=</span><span class="st">"fylke"</span>,allSmall <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid fylke</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11  0100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0  0400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8  0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      2  0500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14  0600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9  0600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      4  0800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      3  0800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0  0100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0  1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      3  1000</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, formula<span class="op">=</span><span class="st">"A+B"</span>, A<span class="op">=</span><span class="st">"fylke"</span>,B<span class="op">=</span><span class="st">"kostragr"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid    A  B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11 0100 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0 0400 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8 0500 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      3 0500 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14 0600 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9 0600 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      4 0800 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      3 0800 03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0 0100 04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0 1000 04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      3 1000 04</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>, formula<span class="op">=</span><span class="st">"A*B+C"</span>, A<span class="op">=</span><span class="st">"fylke"</span>,B<span class="op">=</span><span class="st">"kostragr"</span>,C<span class="op">=</span><span class="st">"annet"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid    A  B  C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     11 0100 03 11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      0 0400 03  7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      8 0500 03  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      3 0500 03 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     14 0600 03  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      9 0600 03 12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      4 0800 03  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      3 0800 03  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0 0100 04  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0 1000 04  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      3 1000 04  4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span> <span class="co">#   Examples:  Several freq variables without freqVarGroup (allSmall ignored)</span></span></span>
<span class="r-in"><span> <span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region annet arbeid soshjelp trygd Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100    11     11       55    36   113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200     7      0       29    18    54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300     5      8       35    25    73</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400    13      3       17    13    46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     9     14       63    52   138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000    12      9       24    22    67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300     6      4       22     8    40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400     9      3       38    15    65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100     3      0        9     0    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100     9      0       32    20    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700     4      3       18    11    36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   0100    14     11       64    36   125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   0400     7      0       29    18    54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   0500    18     11       52    38   119</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   0600    21     23       87    74   205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   0800    15      7       60    23   105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   1000    13      3       50    31    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     03    72     52      283   189   596</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     04    16      3       59    31   109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  Total    88     55      342   220   705</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span>,makeSums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region fylke kostragr annet arbeid soshjelp trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100  0100       03    11     11       55    36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200  0400       03     7      0       29    18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300  0500       03     5      8       35    25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400  0500       03    13      3       17    13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900  0600       03     9     14       63    52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000  0600       03    12      9       24    22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300  0800       03     6      4       22     8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400  0800       03     9      3       38    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100  0100       04     3      0        9     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100  1000       04     9      0       32    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700  1000       04     4      3       18    11</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span>,extraOutput<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">input</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region fylke kostragr annet_arbeid_soshjelp_trygd f_Re_Q</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100  0100       03                       annet     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200  0400       03                       annet      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300  0500       03                       annet      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400  0500       03                       annet     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900  0600       03                       annet      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000  0600       03                       annet     12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300  0800       03                       annet      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400  0800       03                       annet      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100  0100       04                       annet      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100  1000       04                       annet      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700  1000       04                       annet      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 011100  0100       03                      arbeid     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 043200  0400       03                      arbeid      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 051300  0500       03                      arbeid      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 051400  0500       03                      arbeid      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 061900  0600       03                      arbeid     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 062000  0600       03                      arbeid      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 083300  0800       03                      arbeid      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 083400  0800       03                      arbeid      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 012100  0100       04                      arbeid      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 102100  1000       04                      arbeid      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 102700  1000       04                      arbeid      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 011100  0100       03                    soshjelp     55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 043200  0400       03                    soshjelp     29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 051300  0500       03                    soshjelp     35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 051400  0500       03                    soshjelp     17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 061900  0600       03                    soshjelp     63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 062000  0600       03                    soshjelp     24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 083300  0800       03                    soshjelp     22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 083400  0800       03                    soshjelp     38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 012100  0100       04                    soshjelp      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 102100  1000       04                    soshjelp     32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 102700  1000       04                    soshjelp     18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 011100  0100       03                       trygd     36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 043200  0400       03                       trygd     18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 051300  0500       03                       trygd     25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37 051400  0500       03                       trygd     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38 061900  0600       03                       trygd     52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39 062000  0600       03                       trygd     22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40 083300  0800       03                       trygd      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41 083400  0800       03                       trygd     15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42 012100  0100       04                       trygd      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43 102100  1000       04                       trygd     20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44 102700  1000       04                       trygd     11</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span>,extraOutput<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">formula</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ~region * annet_arbeid_soshjelp_trygd + fylke * annet_arbeid_soshjelp_trygd + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     kostragr * annet_arbeid_soshjelp_trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f9a488ccb0&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ===============================================================</span></span></span>
<span class="r-in"><span> <span class="co">#   Examples: With freqVarGroup</span></span></span>
<span class="r-in"><span> <span class="co"># ==========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ==========  With no single-groups  ================</span></span></span>
<span class="r-in"><span> <span class="va">ex1</span> <span class="op">=</span> <span class="fu">Kostra</span><span class="fu">:::</span><span class="fu">exData1</span><span class="op">(</span><span class="op">)</span>   <span class="co">#  hack endre seinere</span></span></span>
<span class="r-in"><span> <span class="va">freqVarGroup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">ex1</span>, idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">15</span>,freqVarGroup<span class="op">=</span><span class="va">freqVarGroup</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........=-**.:=(Check:28)-**..............:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region annet_A arb_A soshj_A trygd_A annet_B arb_B soshj_B trygd_B s1 s2  s3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  111100      12     4      32      25       0     0       3       0  4  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  111200       0     7      20      15       3     3       7       3  3  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  111400       0     6      11       8       3     0       0       0  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  113300       3    11      16      16       0     3       4       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  113500       8    14      33      42       0     3       5       3  3  8  11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  114100       4     3       8      19       3     0       3       0  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  114200       6     8      39      27       3     0       9       5  3  3   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  114400       0     0       0       0       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  114500       0     0       6       3       0     0       0       3  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 115100       3     0       0       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 121100       5     3      36      33       0     0       3       3  3  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 122200       6     4      25      22       3     0       3       0  0  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 122300       6     6      12      15       0     0       5       6  0  3   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 123100       6     5      22      11       0     0       4       3  4  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 123400       0     0      17       8       3     0       3       3  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 124100       3     0      15       9       0     0       0       3  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 124200       3     0      22      13       3     3       0       0  3  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 124400       7     8       7      15       0     0       7       0  0  0   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 125100       9     7      34      28       0     3       6       3  3  6   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 125900      23    14      79      48       0     3      14       6  3  7   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 126400       0     7      27      19       0     3       4       5  0  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 126500       3     3       4       0       0     0       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 141100       3     0       5       5       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 141200       3     3       0       0       0     0       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 141300       0     3       3       3       0     0       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 141600      10     9      40      42       3     0      11       3  3  0   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 141700       3     3      20      12       0     3       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 141800       4     0       6       7       0     0       3       0  0  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 141900       3     6      18      13       0     0       3       3  0  3   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 142800       5     3      37      23       0     3       7       6  3  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 142900       3     6      18      14       0     3       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 143000       0     3      11       8       3     0       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 143100       4     3      25      17       0     6       3       3  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 143300       7    10      22      12       0     0       3       0  3  0   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 144100       0     6      12      11       0     0       0       3  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 144400       0     0       3       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37   1100      36    53     165     155      12     9      34      14 19 14  34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38   1200      71    57     300     221       9    12      49      32 16 25  48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39   1400      45    55     220     167       6    15      42      18 12 12  40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40     01      22    16     117      92       0     3      13      12 10  3  15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41     02      42    70     248     187      15    15      47      31 22 21  45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42     03      72    70     276     238       9    18      50      15 15 24  50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43     04       3     3       6       3       0     0       6       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44     05      13     6      38      23       3     0       9       6  0  3   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45  Total     152   165     685     543      27    36     125      64 47 51 122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      s4 annet arb soshj trygd    A   B Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    69    12   4    35    25   73   3    76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    49     3  10    27    18   42  16    58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    22     3   6    11     8   25   3    28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    50     3  14    20    16   46   7    53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    86     8  17    38    45   97  11   108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    34     7   3    11    19   34   6    40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    83     9   8    48    32   80  17    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     3     0   0     3     0    0   3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    12     0   0     6     6    9   3    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    3     3   0     0     0    3   0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   74     5   3    39    36   77   6    83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   53     9   4    28    22   57   6    63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   41     6   6    17    21   39  11    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   44     6   5    26    14   44   7    51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   31     3   0    20    11   25   9    34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   24     3   0    15    12   27   3    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   41     6   3    22    13   38   6    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   40     7   8    14    15   37   7    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   74     9  10    40    31   78  12    90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  171    23  17    93    54  164  23   187</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21   62     0  10    31    24   53  12    65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    7     3   3     4     0   10   0    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23   16     3   0     8     5   13   3    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    3     3   3     0     0    6   0     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25    9     0   3     6     3    9   3    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26  106    13   9    51    45  101  17   118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   38     3   6    20    12   38   3    41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28   17     4   0     9     7   17   3    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   37     3   6    21    16   40   6    46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   75     5   6    44    29   68  16    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31   44     3   9    21    14   41   6    47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32   25     3   3    14     8   22   6    28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33   55     4   9    28    20   49  12    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34   47     7  10    25    12   51   3    54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35   29     0   6    12    14   29   3    32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36    3     0   0     3     0    3   0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37  411    48  62   199   169  409  69   478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38  662    80  69   349   253  649 102   751</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39  504    51  70   262   185  487  81   568</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40  247    22  19   130   104  247  28   275</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41  567    57  85   295   218  547 108   655</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42  659    81  88   326   253  656  92   748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43   18     3   3    12     3   15   6    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44   86    16   6    47    29   80  18    98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45 1577   179 201   810   607 1545 252  1797</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">ex1</span>, idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">15</span>,freqVarGroup<span class="op">=</span><span class="va">freqVarGroup</span>, makeSums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........=-**.:=(Check:28)-**..............:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region fylke kostragr annet_A arb_A soshj_A trygd_A annet_B arb_B soshj_B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  111100  1100       01      12     4      32      25       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  111200  1100       02       0     7      20      15       3     3       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  111400  1100       02       0     6      11       8       3     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  113300  1100       03       3    11      16      16       0     3       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  113500  1100       03       8    14      33      42       0     3       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  114100  1100       02       4     3       8      19       3     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  114200  1100       02       6     8      39      27       3     0       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  114400  1100       04       0     0       0       0       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  114500  1100       05       0     0       6       3       0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 115100  1100       04       3     0       0       0       0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 121100  1200       01       5     3      36      33       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 122200  1200       03       6     4      25      22       3     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 122300  1200       02       6     6      12      15       0     0       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 123100  1200       02       6     5      22      11       0     0       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 123400  1200       05       0     0      17       8       3     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 124100  1200       02       3     0      15       9       0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 124200  1200       03       3     0      22      13       3     3       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 124400  1200       03       7     8       7      15       0     0       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 125100  1200       03       9     7      34      28       0     3       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 125900  1200       03      23    14      79      48       0     3      14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 126400  1200       02       0     7      27      19       0     3       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 126500  1200       05       3     3       4       0       0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 141100  1400       05       3     0       5       5       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 141200  1400       05       3     3       0       0       0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 141300  1400       04       0     3       3       3       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 141600  1400       03      10     9      40      42       3     0      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 141700  1400       03       3     3      20      12       0     3       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 141800  1400       05       4     0       6       7       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 141900  1400       02       3     6      18      13       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 142800  1400       01       5     3      37      23       0     3       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 142900  1400       02       3     6      18      14       0     3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 143000  1400       02       0     3      11       8       3     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 143100  1400       02       4     3      25      17       0     6       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 143300  1400       02       7    10      22      12       0     0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 144100  1400       01       0     6      12      11       0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 144400  1400       04       0     0       3       0       0     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    trygd_B s1 s2 s3  s4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        0  4  0  3  69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        3  3  0  6  49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        0  3  3  0  22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        0  0  0  3  50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        3  3  8 11  86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        0  3  0  3  34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        5  3  3  8  83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        0  0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        3  0  0  0  12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       0  0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       3  3  0  6  74</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       0  0  3  7  53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       6  0  3  6  41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       3  4  0  3  44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       3  0  0  3  31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16       3  0  3  3  24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17       0  3  0  0  41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18       0  0  0  4  40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19       3  3  6  7  74</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20       6  3  7  6 171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21       5  0  3  0  62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22       0  0  0  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23       0  0  0  0  16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24       0  0  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25       0  0  0  3   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26       3  3  0  9 106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27       0  0  0  3  38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28       0  0  3  0  17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29       3  0  3  6  37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30       6  3  3  3  75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31       0  0  0  3  44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32       0  0  0  3  25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33       3  3  3  0  55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34       0  3  0  4  47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35       3  0  0  3  29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36       0  0  0  0   3</span>
<span class="r-in"><span> <span class="va">a1</span> <span class="op">&lt;-</span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">ex1</span>, idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">15</span>,freqVarGroup<span class="op">=</span><span class="va">freqVarGroup</span>, extraOutput<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........=-**.:=(Check:28)-**..............:=]</span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">a1</span><span class="op">$</span><span class="va">input</span><span class="op">)</span> <span class="co"># ad hoc created data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   region fylke kostragr annet_arb_soshj_trygd A_B s1_s2_s3_s4 f_Re_Q</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 111100  1100       01                 annet   A          s4     12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 111100  1100       01                   arb   A          s1      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 111100  1100       01                   arb   B          s3      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 111100  1100       01                 soshj   A          s4     32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 111100  1100       01                 soshj   B          s3      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 111100  1100       01                 trygd   A          s4     25</span>
<span class="r-in"><span> <span class="va">a1</span><span class="op">$</span><span class="va">formula</span>     <span class="co"># The formula used</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ~region + annet_arb_soshj_trygd + A_B + fylke + kostragr + s1_s2_s3_s4 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     region:annet_arb_soshj_trygd + region:A_B + annet_arb_soshj_trygd:A_B + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     annet_arb_soshj_trygd:fylke + A_B:fylke + annet_arb_soshj_trygd:kostragr + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     A_B:kostragr + region:s1_s2_s3_s4 + fylke:s1_s2_s3_s4 + kostragr:s1_s2_s3_s4 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     region:annet_arb_soshj_trygd:A_B + annet_arb_soshj_trygd:A_B:fylke + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     annet_arb_soshj_trygd:A_B:kostragr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f975c75aa0&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ==========  With some single-groups  ================</span></span></span>
<span class="r-in"><span> <span class="va">freqVarGroup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">ex1</span>, idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">19</span>,freqVarGroup<span class="op">=</span><span class="va">freqVarGroup</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........=-**....:=-**..:=(Check:42)-**..........:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region annet_A arb_A soshj_A trygd_A annet_B arb_B soshj_B trygd_B s1 s2  s3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  111100      12     4      32      25       0     0       3       0  4  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  111200       0     7      20      15       3     3       7       3  3  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  111400       0     6      11       9       3     0       0       0  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  113300       0    11      16      16       0     3       4       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  113500       8    11      33      42       0     3       8       3  6  5  11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  114100       4     3       8      19       3     0       3       0  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  114200       6     8      39      27       3     0       9       5  3  3   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  114400       0     0       0       0       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  114500       3     0       6       3       0     0       0       3  3  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 115100       3     0       0       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 121100       5     3      36      33       0     0       3       3  0  0   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 122200       6     4      25      22       0     3       3       0  0  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 122300       6     3      12      15       0     3       4       3  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 123100       6     5      22      11       0     0       3       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 123400       0     3      17       8       0     0       3       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 124100       3     0      15       9       0     0       3       0  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 124200       3     0      22      13       3     0       0       3  3  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 124400       6     8       7      15       0     0       7       0  0  0   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 125100       9     7      34      28       0     3       3       3  3  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 125900      23    16      79      48       0     3      14       9  3 11   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 126400       3     7      27      19       3     0       6       5  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 126500       3     0       4       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 141100       3     0       5       5       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 141200       0     3       0       0       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 141300       0     3       3       3       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 141600      10     9      40      42       3     0      11       3  0  0  12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 141700       3     3      20      10       3     3       0       0  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 141800       4     3       6       7       0     0       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 141900       3     6      18      12       0     0       3       3  0  0   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 142800       5     6      37      23       0     3       7       0  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 142900       3     6      18      14       0     3       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 143000       3     0      11       9       0     3       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 143100       4     3      25      17       0     6       3       3  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 143300       4    10      22      14       0     0       3       3  3  0   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 144100       3     6      12       9       0     0       0       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 144400       0     0       3       0       0     0       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37   1100      36    50     165     156      12     9      37      14 25 11  31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38   1200      73    56     300     221       6    12      49      32 15 26  48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39   1400      45    58     220     165       6    18      42      15 12  9  43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40     01      25    19     117      90       0     3      13       6 10  3  15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41     02      45    64     248     190      15    18      47      28 21 18  48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42     03      68    69     276     236       9    18      50      21 15 25  50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43     04       3     3       6       3       0     0       6       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44     05      13     9      38      23       0     0      12       6  6  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45  Total     154   164     685     542      24    39     128      61 52 46 122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      s4  W   X  Y   Z nOOtW nOOtX nOOtZ annet arb soshj trygd    A   B Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    69  3  12 NA  32    73    64    44    12   4    35    25   73   3    76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    49  0   0 NA  19    58    58    39     3  10    27    18   42  16    58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    23  0   0 NA  12    29    29    17     3   6    11     9   26   3    29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    50  3   0 NA  14    47    50    36     0  14    20    16   43   7    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    86  6   9 NA  33   102    99    75     8  14    41    45   94  14   108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    34  6   6 NA   9    34    34    31     7   3    11    19   34   6    40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    83  9   3 NA  39    88    94    58     9   8    48    32   80  17    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     3  0   0 NA   0     3     3     3     0   0     3     0    0   3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    12  3   3 NA   9    12    12     6     3   0     6     6   12   3    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    3  0   3 NA   0     3     0     3     3   0     0     0    3   0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   74  3   3 NA  34    80    80    49     5   3    39    36   77   6    83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   53  3   6 NA  24    60    57    39     6   7    28    22   57   6    63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   40  3   6 NA  13    43    40    33     6   6    16    18   36  10    46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   44  3   6 NA  20    47    44    30     6   5    25    14   44   6    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   28  0   0 NA  17    34    34    17     0   3    20    11   28   6    34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   24  3   3 NA  15    27    27    15     3   0    18     9   27   3    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   41  0   3 NA  22    44    41    22     6   0    22    16   38   6    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   39  0   7 NA   7    43    36    36     6   8    14    15   36   7    43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   74  6   9 NA  34    81    78    53     9  10    37    31   78   9    87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  172 15  25 NA  82   177   167   110    23  19    93    57  166  26   192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21   64  9   3 NA  30    61    67    40     6   7    33    24   56  14    70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    7  0   0 NA   3     7     7     4     3   0     4     0    7   0     7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23   16  0   3 NA   6    16    13    10     3   0     8     5   13   3    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    6  0   0 NA   0     6     6     6     0   3     3     0    3   3     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25   12  0   0 NA   3    12    12     9     0   3     6     3    9   3    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26  106  3   9 NA  39   115   109    79    13   9    51    45  101  17   118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   36  6   3 NA  22    36    39    20     6   6    20    10   36   6    42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28   20  0   3 NA   6    23    20    17     4   3     9     7   20   3    23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   36  0   0 NA  15    45    45    30     3   6    21    15   39   6    45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   75  6   6 NA  37    75    75    44     5   9    44    23   71  10    81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31   44  0   3 NA  17    44    41    27     3   9    18    14   41   3    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32   26  0   3 NA  12    29    26    17     3   3    14     9   23   6    29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33   55  3   3 NA  25    58    58    36     4   9    28    20   49  12    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34   46  3   6 NA  23    53    50    33     4  10    25    17   50   6    56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35   27  0   3 NA  12    33    30    21     3   6    12    12   30   3    33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36    0  0   0 NA   3     3     3     0     0   0     3     0    3   0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37  412 30  36 NA 167   449   443   312    48  59   202   170  407  72   479</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38  660 45  71 NA 301   704   678   448    79  68   349   253  650  99   749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39  505 21  42 NA 220   548   527   349    51  76   262   180  488  81   569</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40  245 12  24 NA 115   261   249   158    25  22   130    96  251  22   273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41  568 39  42 NA 249   616   613   406    60  82   295   218  547 108   655</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42  657 42  71 NA 277   705   676   470    77  87   326   257  649  98   747</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43   18  0   3 NA   6    21    18    15     3   3    12     3   15   6    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44   89  3   9 NA  41    98    92    60    13   9    50    29   83  18   101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45 1577 96 149 NA 688  1701  1648  1109   178 203   813   603 1545 252  1797</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">ex1</span>, idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">19</span>,freqVarGroup<span class="op">=</span><span class="va">freqVarGroup</span>, singleTotal <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........=-**....:=-**..:=(Check:42)-**..........:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region annet_A arb_A soshj_A trygd_A annet_B arb_B soshj_B trygd_B s1 s2  s3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  111100      12     4      32      25       0     0       3       0  4  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  111200       0     7      20      15       3     3       7       3  3  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  111400       0     6      11       9       3     0       0       0  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  113300       0    11      16      16       0     3       4       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  113500       8    11      33      42       0     3       8       3  6  5  11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  114100       4     3       8      19       3     0       3       0  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  114200       6     8      39      27       3     0       9       5  3  3   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  114400       0     0       0       0       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  114500       3     0       6       3       0     0       0       3  3  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 115100       3     0       0       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 121100       5     3      36      33       0     0       3       3  0  0   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 122200       6     4      25      22       0     3       3       0  0  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 122300       6     3      12      15       0     3       4       3  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 123100       6     5      22      11       0     0       3       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 123400       0     3      17       8       0     0       3       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 124100       3     0      15       9       0     0       3       0  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 124200       3     0      22      13       3     0       0       3  3  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 124400       6     8       7      15       0     0       7       0  0  0   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 125100       9     7      34      28       0     3       3       3  3  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 125900      23    16      79      48       0     3      14       9  3 11   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 126400       3     7      27      19       3     0       6       5  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 126500       3     0       4       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 141100       3     0       5       5       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 141200       0     3       0       0       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 141300       0     3       3       3       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 141600      10     9      40      42       3     0      11       3  0  0  12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 141700       3     3      20      10       3     3       0       0  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 141800       4     3       6       7       0     0       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 141900       3     6      18      12       0     0       3       3  0  0   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 142800       5     6      37      23       0     3       7       0  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 142900       3     6      18      14       0     3       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 143000       3     0      11       9       0     3       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 143100       4     3      25      17       0     6       3       3  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 143300       4    10      22      14       0     0       3       3  3  0   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 144100       3     6      12       9       0     0       0       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 144400       0     0       3       0       0     0       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37   1100      36    50     165     156      12     9      37      14 25 11  31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38   1200      73    56     300     221       6    12      49      32 15 26  48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39   1400      45    58     220     165       6    18      42      15 12  9  43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40     01      25    19     117      90       0     3      13       6 10  3  15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41     02      45    64     248     190      15    18      47      28 21 18  48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42     03      68    69     276     236       9    18      50      21 15 25  50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43     04       3     3       6       3       0     0       6       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44     05      13     9      38      23       0     0      12       6  6  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45  Total     154   164     685     542      24    39     128      61 52 46 122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      s4  W   X  Y   Z nOOtW nOOtX nOOtZ annet arb soshj trygd    A   B Total_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    69  3  12 NA  32    73    64    44    12   4    35    25   73   3      76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    49  0   0 NA  19    58    58    39     3  10    27    18   42  16      58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    23  0   0 NA  12    29    29    17     3   6    11     9   26   3      29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    50  3   0 NA  14    47    50    36     0  14    20    16   43   7      50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    86  6   9 NA  33   102    99    75     8  14    41    45   94  14     108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    34  6   6 NA   9    34    34    31     7   3    11    19   34   6      40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    83  9   3 NA  39    88    94    58     9   8    48    32   80  17      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     3  0   0 NA   0     3     3     3     0   0     3     0    0   3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    12  3   3 NA   9    12    12     6     3   0     6     6   12   3      15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    3  0   3 NA   0     3     0     3     3   0     0     0    3   0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   74  3   3 NA  34    80    80    49     5   3    39    36   77   6      83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   53  3   6 NA  24    60    57    39     6   7    28    22   57   6      63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   40  3   6 NA  13    43    40    33     6   6    16    18   36  10      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   44  3   6 NA  20    47    44    30     6   5    25    14   44   6      50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   28  0   0 NA  17    34    34    17     0   3    20    11   28   6      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   24  3   3 NA  15    27    27    15     3   0    18     9   27   3      30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   41  0   3 NA  22    44    41    22     6   0    22    16   38   6      44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   39  0   7 NA   7    43    36    36     6   8    14    15   36   7      43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   74  6   9 NA  34    81    78    53     9  10    37    31   78   9      87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  172 15  25 NA  82   177   167   110    23  19    93    57  166  26     192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21   64  9   3 NA  30    61    67    40     6   7    33    24   56  14      70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    7  0   0 NA   3     7     7     4     3   0     4     0    7   0       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23   16  0   3 NA   6    16    13    10     3   0     8     5   13   3      16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    6  0   0 NA   0     6     6     6     0   3     3     0    3   3       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25   12  0   0 NA   3    12    12     9     0   3     6     3    9   3      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26  106  3   9 NA  39   115   109    79    13   9    51    45  101  17     118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   36  6   3 NA  22    36    39    20     6   6    20    10   36   6      42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28   20  0   3 NA   6    23    20    17     4   3     9     7   20   3      23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   36  0   0 NA  15    45    45    30     3   6    21    15   39   6      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   75  6   6 NA  37    75    75    44     5   9    44    23   71  10      81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31   44  0   3 NA  17    44    41    27     3   9    18    14   41   3      44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32   26  0   3 NA  12    29    26    17     3   3    14     9   23   6      29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33   55  3   3 NA  25    58    58    36     4   9    28    20   49  12      61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34   46  3   6 NA  23    53    50    33     4  10    25    17   50   6      56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35   27  0   3 NA  12    33    30    21     3   6    12    12   30   3      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36    0  0   0 NA   3     3     3     0     0   0     3     0    3   0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37  412 30  36 NA 167   449   443   312    48  59   202   170  407  72     479</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38  660 45  71 NA 301   704   678   448    79  68   349   253  650  99     749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39  505 21  42 NA 220   548   527   349    51  76   262   180  488  81     569</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40  245 12  24 NA 115   261   249   158    25  22   130    96  251  22     273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41  568 39  42 NA 249   616   613   406    60  82   295   218  547 108     655</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42  657 42  71 NA 277   705   676   470    77  87   326   257  649  98     747</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43   18  0   3 NA   6    21    18    15     3   3    12     3   15   6      21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44   89  3   9 NA  41    98    92    60    13   9    50    29   83  18     101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45 1577 96 149 NA 688  1701  1648  1109   178 203   813   603 1545 252    1797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Total_2 Total_3 Total_4 Total_5 Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       76      76      76      76    76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       58      58      58      58    58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       29      29      29      29    29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       50      50      50      50    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      108     108     108     108   108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       40      40      40      40    40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       97      97      97      97    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        3       3       3       3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       15      15      15      15    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       3       3       3       3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      83      83      83      83    83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      63      63      63      63    63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      46      46      46      46    46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      50      50      50      50    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      34      34      34      34    34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      30      30      30      30    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      44      44      44      44    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      43      43      43      43    43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      87      87      87      87    87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     192     192     192     192   192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      70      70      70      70    70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22       7       7       7       7     7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23      16      16      16      16    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24       6       6       6       6     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25      12      12      12      12    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26     118     118     118     118   118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27      42      42      42      42    42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28      23      23      23      23    23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29      45      45      45      45    45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30      81      81      81      81    81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31      44      44      44      44    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32      29      29      29      29    29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33      61      61      61      61    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34      56      56      56      56    56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35      33      33      33      33    33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36       3       3       3       3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37     479     479     479     479   479</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38     749     749     749     749   749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39     569     569     569     569   569</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40     273     273     273     273   273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41     655     655     655     655   655</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42     747     747     747     747   747</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43      21      21      21      21    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44     101     101     101     101   101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45    1797    1797    1797    1797  1797</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ====== With incorrect totals</span></span></span>
<span class="r-in"><span> <span class="va">ex1b</span> <span class="op">&lt;-</span> <span class="va">ex1</span></span></span>
<span class="r-in"><span> <span class="va">ex1b</span><span class="op">$</span><span class="va">s1</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">=</span><span class="fl">2L</span></span></span>
<span class="r-in"><span> <span class="va">ex1b</span><span class="op">$</span><span class="va">arb_A</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">=</span><span class="fl">5L</span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">ex1b</span>, idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">19</span>,freqVarGroup<span class="op">=</span><span class="va">freqVarGroup</span>, singleTotal <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Not identical rowsums in all groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........:=-**.....::=(Check:45)-**...........=]</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Not identical rowsums in all groups. First result named as Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region annet_A arb_A soshj_A trygd_A annet_B arb_B soshj_B trygd_B s1 s2  s3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  111100      12     3      32      25       0     3       0       0  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  111200       0     5      20      15       6     3       7       3  6  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  111400       0     6      11       9       3     0       0       0  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  113300       3    11      16      16       0     0       4       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  113500       8    14      33      42       0     3       5       3  3  8  11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  114100       4     3       8      19       0     0       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  114200       3     8      39      27       3     0       9       8  3  3   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  114400       0     0       0       0       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  114500       0     0       6       3       3     0       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 115100       3     0       0       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 121100       5     0      36      33       0     0       3       3  0  0   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 122200       6     4      25      22       3     0       3       0  0  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 122300       6     3      12      15       0     3       4       3  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 123100       6     5      22      11       0     0       3       3  3  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 123400       0     3      17       8       0     0       3       3  3  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 124100       3     0      15       9       0     0       3       0  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 124200       3     0      22      13       3     0       0       3  3  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 124400       6     8       7      15       0     0       7       0  0  0   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 125100       9     7      34      28       0     3       6       0  3  3   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 125900      23    16      79      48       0     6      14       6  3  8   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 126400       3     7      27      19       0     3       6       5  0  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 126500       0     3       4       0       0     0       0       3  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 141100       3     0       5       5       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 141200       3     0       0       3       0     0       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 141300       0     3       3       3       0     0       3       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 141600      10     9      40      42       3     3      11       3  3  0  12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 141700       3     3      20      10       0     3       0       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 141800       4     3       6       7       0     0       3       0  0  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 141900       3     6      18      12       0     0       3       3  0  0   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 142800       5     6      37      23       0     3       7       3  3  3   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 142900       3     6      18      14       0     3       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 143000       3     0      11       9       3     0       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 143100       4     3      25      17       0     6       3       3  3  3   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 143300       7    10      22      11       0     0       3       3  3  0   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 144100       0     6      12      12       0     0       3       0  0  0   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 144400       0     0       3       0       0     0       0       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37   1100      33    50     165     156      15     9      31      17 21 14  34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38   1200      70    56     300     221       6    15      52      29 15 23  48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39   1400      48    55     220     168       6    18      42      15 12  9  43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40     01      22    15     117      93       0     6      13       6  6  3  15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41     02      45    62     248     187      15    18      47      31 21 18  45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42     03      71    72     276     236       9    18      50      18 18 22  56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43     04       3     3       6       3       0     0       6       0  0  0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44     05      10     9      38      26       3     0       9       6  3  3   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45  Total     151   161     685     545      27    42     125      61 48 46 125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      s4  W   X  Y   Z nOOtW nOOtX nOOtZ annet arb soshj trygd    A   B Total_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    67  3  11 NA  31    72    64    44    12   6    32    25   72   3      75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    47  3   0 NA  20    56    59    39     6   8    27    18   40  19      59</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    23  0   0 NA  12    29    29    17     3   6    11     9   26   3      29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    47  6   3 NA  17    47    50    36     3  11    20    19   46   7      53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    86  9   9 NA  33    99    99    75     8  17    38    45   97  11     108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    34  3   3 NA   6    34    34    31     4   3    11    19   34   3      37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    86  6   6 NA  39    91    91    58     6   8    48    35   77  20      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     3  0   0 NA   0     3     3     3     0   0     3     0    0   3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     9  3   0 NA   6     9    12     6     3   0     6     3    9   3      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    3  0   3 NA   0     3     0     3     3   0     0     0    3   0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   74  0   0 NA  31    80    80    49     5   0    39    36   74   6      80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   53  0   6 NA  24    63    57    39     9   4    28    22   57   6      63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   40  3   6 NA  13    43    40    33     6   6    16    18   36  10      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   44  3   6 NA  20    47    44    30     6   5    25    14   44   6      50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   31  0   0 NA  17    34    34    17     0   3    20    11   28   6      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   24  3   3 NA  15    27    27    15     3   0    18     9   27   3      30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   41  0   3 NA  22    44    41    22     6   0    22    16   38   6      44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   39  0   7 NA   7    43    36    36     6   8    14    15   36   7      43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   74  9   9 NA  34    78    78    53     9  10    40    28   78   9      87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  172 15  25 NA  82   177   167   110    23  22    93    54  166  26     192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21   64  9   3 NA  30    61    67    40     3  10    33    24   56  14      70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    7  0   3 NA   6    10     7     4     0   3     4     3    7   3      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23   16  0   3 NA   3    16    13    13     3   0     8     5   13   3      16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    3  0   3 NA   3     6     3     3     3   0     0     3    6   0       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25   12  0   0 NA   3    12    12     9     0   3     6     3    9   3      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26  106  3  12 NA  42   118   109    79    13  12    51    45  101  20     121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   36  3   0 NA  19    36    39    20     3   6    20    10   36   3      39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28   20  0   3 NA   6    23    20    17     4   3     9     7   20   3      23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   36  0   0 NA  15    45    45    30     3   6    21    15   39   6      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   75  9   6 NA  40    75    78    44     5   9    44    26   71  13      84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31   44  0   3 NA  17    44    41    27     3   9    18    14   41   3      44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32   26  0   3 NA  12    29    26    17     6   0    14     9   23   6      29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33   55  3   3 NA  25    58    58    36     4   9    28    20   49  12      61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34   46  3   9 NA  23    53    47    33     7  10    25    14   50   6      56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35   30  0   0 NA  12    33    33    21     0   6    15    12   30   3      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36    3  0   0 NA   3     3     3     0     0   0     3     0    3   0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37  405 33  35 NA 164   443   441   312    48  59   196   173  404  72     476</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38  663 42  71 NA 301   707   678   448    76  71   352   250  647 102     749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39  508 21  45 NA 223   551   527   349    54  73   262   183  491  81     572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40  246 12  17 NA 114   260   255   158    22  21   130    99  247  25     272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41  569 36  45 NA 247   617   608   406    60  80   295   218  542 111     653</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42  654 45  74 NA 280   705   676   470    80  90   326   254  655  95     750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43   21  0   3 NA   6    21    18    15     3   3    12     3   15   6      21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44   86  3  12 NA  41    98    89    60    13   9    47    32   83  18     101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45 1576 96 151 NA 688  1701  1646  1109   178 203   810   606 1542 255    1797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Total_2 Total_3 Total_4 Total_5 Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       73      75      75      75    75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       59      59      59      59    59</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       29      29      29      29    29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       53      53      53      53    53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      108     108     108     108   108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       37      37      37      37    37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       97      97      97      97    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        3       3       3       3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       12      12      12      12    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       3       3       3       3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      80      80      80      80    80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      63      63      63      63    63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      46      46      46      46    46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      50      50      50      50    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      34      34      34      34    34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      30      30      30      30    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      44      44      44      44    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      43      43      43      43    43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      87      87      87      87    87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     192     192     192     192   192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      70      70      70      70    70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22      10      10      10      10    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23      16      16      16      16    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24       6       6       6       6     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25      12      12      12      12    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26     121     121     121     121   121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27      39      39      39      39    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28      23      23      23      23    23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29      45      45      45      45    45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30      84      84      84      84    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31      44      44      44      44    44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32      29      29      29      29    29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33      61      61      61      61    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34      56      56      56      56    56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35      33      33      33      33    33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36       3       3       3       3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37     474     476     476     476   476</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38     749     749     749     749   749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39     572     572     572     572   572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40     270     272     272     272   272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41     653     653     653     653   653</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42     750     750     750     750   750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43      21      21      21      21    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44     101     101     101     101   101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45    1795    1797    1797    1797  1797</span>
<span class="r-in"><span> <span class="va">a2</span> <span class="op">&lt;-</span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">ex1b</span>, idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">19</span>,freqVarGroup<span class="op">=</span><span class="va">freqVarGroup</span>, singleTotal <span class="op">=</span> <span class="cn">FALSE</span>,extraOutput<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Not identical rowsums in all groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........:=-**.....::=(Check:45)-**...........=]</span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">a2</span><span class="op">$</span><span class="va">input</span><span class="op">$</span><span class="va">s1_s2_s3_s4</span>,  useNA <span class="op">=</span><span class="st">"always"</span><span class="op">)</span> <span class="co"># Missing values in ad hoc created data when incorrect totals</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   s1   s2   s3   s4 &lt;NA&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   39   35   66  180    1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ===============================================================</span></span></span>
<span class="r-in"><span> <span class="co">#   Examples  With parameter output</span></span></span>
<span class="r-in"><span> <span class="co"># ===============================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>,output<span class="op">=</span><span class="st">"status"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200      r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  Total      r</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>, freqVar<span class="op">=</span><span class="st">"arbeid"</span>,output<span class="op">=</span><span class="st">"difference"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200     -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  Total      1</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span>,output<span class="op">=</span><span class="st">"status"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region annet arbeid soshjelp trygd Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200     o      r        o     o     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400     o      r        o     o     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100     o      o        o     r     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700     o      r        o     o     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   0100     o      o        o     r     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   0400     o      r        o     o     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   0500     o      r        o     o     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   0600     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   0800     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   1000     o      r        o     o     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     03     o      o        o     o     o</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     04     o      r        o     r     r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  Total     o      r        o     r     r</span>
<span class="r-in"><span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">z2w</span> ,idVar<span class="op">=</span><span class="st">"region"</span>,strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span>,output<span class="op">=</span><span class="st">"difference"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region annet arbeid soshjelp trygd Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  011100     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  043200     0     -1        0     0    -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  051300     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  051400     0      1        0     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  061900     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  062000     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  083300     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  083400     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  012100     0      0        0    -2    -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 102100     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 102700     0      1        0     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   0100     0      0        0    -2    -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   0400     0     -1        0     0    -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   0500     0      1        0     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   0600     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   0800     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   1000     0      1        0     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     03     0      0        0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     04     0      1        0    -2    -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  Total     0      1        0    -2    -1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># ===============================================================</span></span></span>
<span class="r-in"><span> <span class="co">#   Micro data example  (":::" since functions not exported yet)</span></span></span>
<span class="r-in"><span> <span class="co"># ===============================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="va">microData</span> <span class="op">&lt;-</span> <span class="fu">Kostra</span><span class="fu">:::</span><span class="fu">microEx1</span><span class="op">(</span><span class="op">)</span>                 <span class="co"># A micro data set</span></span></span>
<span class="r-in"><span> <span class="va">freqData</span>  <span class="op">&lt;-</span> <span class="fu">MakeFreq</span><span class="op">(</span><span class="va">microData</span>,<span class="st">"freq"</span><span class="op">)</span> <span class="co"># Make cross-classified data</span></span></span>
<span class="r-in"><span> <span class="va">freqData</span><span class="op">$</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">freqData</span><span class="op">)</span>                  <span class="co"># Add id-variable</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co">#  Rounding with makeSums=FALSE</span></span></span>
<span class="r-in"><span> <span class="va">freqRound</span> <span class="op">&lt;-</span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">freqData</span>, idVar<span class="op">=</span><span class="st">"id"</span>, strataVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"fylke"</span>, <span class="st">"kostragr"</span>, <span class="st">"hovedint"</span><span class="op">)</span>, freqVar<span class="op">=</span><span class="st">"freq"</span>, makeSums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="va">microRound</span>  <span class="op">&lt;-</span> <span class="fu">MakeMicro</span><span class="op">(</span><span class="va">freqRound</span>,<span class="st">"freq"</span><span class="op">)</span>  <span class="co"># Create micro data set from output</span></span></span>
<span class="r-in"><span> <span class="va">microRound</span>  <span class="op">&lt;-</span> <span class="va">microRound</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span>                        <span class="co"># Remove some variables</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># Alternative where only region sums and the cross-classifications fylke*hovedint and kostragr*hovedint are to be published</span></span></span>
<span class="r-in"><span> <span class="va">freqRound2</span> <span class="op">&lt;-</span> <span class="fu">RoundKostra</span><span class="op">(</span><span class="va">freqData</span>, idVar<span class="op">=</span><span class="st">"id"</span>, formula<span class="op">=</span><span class="op">(</span><span class="st">"region +fylke*hovedint + kostragr*hovedint"</span><span class="op">)</span>, freqVar<span class="op">=</span><span class="st">"freq"</span>,</span></span>
<span class="r-in"><span>                   makeSums<span class="op">=</span><span class="cn">FALSE</span>, allSmall<span class="op">=</span><span class="cn">FALSE</span>, region<span class="op">=</span><span class="st">"region"</span>,fylke<span class="op">=</span><span class="st">"fylke"</span>,kostragr<span class="op">=</span><span class="st">"kostragr"</span>,hovedint<span class="op">=</span><span class="st">"hovedint"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-in"><span> <span class="va">microRound2</span>  <span class="op">&lt;-</span> <span class="fu">MakeMicro</span><span class="op">(</span><span class="va">freqRound2</span>,<span class="st">"freq"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">microRound2</span>  <span class="op">&lt;-</span> <span class="va">microRound2</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

